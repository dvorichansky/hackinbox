"use strict";function ownKeys(n,o){var c=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);o&&(e=e.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),c.push.apply(c,e)}return c}function _objectSpread(n){for(var o=1;o<arguments.length;o++){var c=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(c,!0).forEach(function(o){_defineProperty(n,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(c)):ownKeys(c).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(c,o))})}return n}function _defineProperty(n,o,c){return o in n?Object.defineProperty(n,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[o]=c,n}!function(){var n="".concat(location.origin,"/hackinbox/"),o="".concat(n,"hackinbox_data.json");function c(){!function(n,o){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(c=_objectSpread({path:"/"},c)).expires&&(c.expires=c.expires.toUTCString());var e=encodeURIComponent(n)+"="+encodeURIComponent(o);for(var t in c){e+="; "+t;var a=c[t];!0!==a&&(e+="="+a)}document.cookie=e}("hackinbox","loaded",{"max-age":864e5})}fetch(o).then(function(n){if(200===n.status)return console.log("Successful connection!"),n.json();300===n.status&&console.log("Queue...")}).then(function(o){if(!function(n){if(n){var o=n.some(function(n){return n==location.hostname+location.pathname});return console.log(o?"Page excluded for hackinbox":"The page is allowed to display hackbox"),o}}(o.exception_pages))return"OFF"==o.status?c():void setTimeout(function(){var e,t,a,r,i,s;!function(o){var c=o.hackinbox_content,e=o.hackinbox_form,t=o.hackinbox_counter,a=o.hackinbox_appearance;document.body.insertAdjacentHTML("beforeend",'<div class="hackinbox">\n            <div class="hackinbox-container">\n                <div class="hackinbox-picture">\n                    <img class="hackinbox-picture__img" src="'.concat(n,'img/hackinbox_picture.png" />\n                </div>\n                <div class="hackinbox-content">                                  \n                    <a href="javascript:void(0)" class="hackinbox-close" data-hackinbox="close">×</a>\n                    <div class="hackinbox-content__title">').concat(c.title,'</div>\n\n                    <div class="hackinbox-counter">\n                        <div class="hackinbox-counter__title">').concat(t.title,'</div>\n                        <div class="hackinbox-counter-clock">\n                            <div class="hackinbox-counter-clock__dig">\n                                <div class="hackinbox-counter-clock__number hackinbox-counter-clock__number-hours">00</div>\n                                <div class="hackinbox-counter-clock__name">часы</div>\n                            </div>\n                            <div class="hackinbox-counter-clock__dz"></div>\n                            <div class="hackinbox-counter-clock__dig">\n                                <div class="hackinbox-counter-clock__number hackinbox-counter-clock__number-minutes">23</div>\n                                <div class="hackinbox-counter-clock__name">минуты</div>\n                            </div>\n                            <div class="hackinbox-counter-clock__dz"></div>\n                            <div class="hackinbox-counter-clock__dig">\n                                <div class="hackinbox-counter-clock__number hackinbox-counter-clock__number-seconds">58</div>\n                                <div class="hackinbox-counter-clock__name">секунды</div>\n                            </div>\n                        </div>\n                    </div>\n                \n                    <form class="hackinbox-form" action="POST">\n                        <input type="hidden" name="form" value="').concat(e.name,'">\n                        <input type="hidden" name="referer" value="').concat(location.href,'">\n                        <input \n                          type="text" \n                          name="phone" \n                          class="hackinbox-form__input hackinbox-form__userphone" \n                          value="').concat(e.mask,'"\n                          placeholder="').concat(e.placeholder,'" \n                          maxlength="34">\n                        <small class="hackinbox-form__message-error">').concat(e.userphone_message_error,'</small>\n                        <button \n                          type="submit" \n                          class="hackinbox-form__button"\n                        >').concat(e.button,'</button>  \n                        <div class="hackinbox-form__success">\n                            <div class="hackinbox-form__success-text">').concat(e.success_text,'</div>\n                            <button \n                              type="button" \n                              class="hackinbox-form__button hackinbox-form__success-button" \n                              data-hackinbox="close">').concat(e.success_button,'</button>\n                        </div>                      \n                    </form>                    \n                </div>\n            </div>\n        </div>\n        <div class="hackinbox-overlay" data-hackinbox="close"></div>\n        <style id="hackinbox_style">\n          ').concat(a.box_shadow?".hackinbox{box-shadow:".concat(a.box_shadow,"}"):"","\n          ").concat(c.background_color?".hackinbox-content{background-color:#".concat(c.background_color,"}"):"","\n          ").concat(c.title_color?".hackinbox-content__title{color:#".concat(c.title_color,"}"):"","\n          ").concat(a.overlay?".hackinbox-overlay{background-color:#".concat(a.overlay.background_color,";opacity:").concat(a.overlay.opacity,"}"):"","\n          ").concat(e.button_color?".hackinbox-form__button{background-color:#".concat(e.button_color,";}"):"","\n          ").concat(e.success_button_color?".hackinbox-form__success-button{background-color:#".concat(e.success_button_color,";}"):"","\n          ").concat(t.color||t.background_color?".hackinbox-counter-clock__number,.hackinbox-counter-clock__dz:before,.hackinbox-counter-clock__dz:after{background-color:#".concat(t.background_color,";color:#").concat(t.color,";}"):"","\n        </style>"))}(o),e=o.hackinbox_form.configuration_file,t=$(".hackinbox-form [name=phone]"),a=$(".hackinbox-form [type=submit]"),function(n){n.addEventListener("input",function(){var n=this.defaultValue,o=0,c=n.replace(/\D/g,""),e=this.value.replace(/\D/g,"");c.length>=e.length&&(e=c),n=n.replace(/[_\d]/g,function(n){return e.charAt(o++)||"_"}),this.value=n,(o=n.lastIndexOf(e.substr(-1)))<n.length&&n!=this.defaultValue?o++:o=n.indexOf("_"),function(n,o){if(o.focus(),o.setSelectionRange)o.setSelectionRange(n,n);else if(o.createTextRange){var c=o.createTextRange();c.collapse(!0),c.moveEnd("character",n),c.moveStart("character",n),c.select()}}(o,this)},!1)}(r=document.querySelector(".hackinbox-form [name=phone]")),document.addEventListener("submit",function(n){var o=n.target;o.classList.contains("hackinbox-form")&&(n.preventDefault(),-1===r.value.indexOf("_")?(t.removeClass("hackinbox-form__userphone-error"),a.prop("disabled",!0),$.ajax({type:"POST",url:e,data:$(o).serialize(),dataType:"html",beforeSend:function(){},success:function(n){$(o).contents().filter(function(){return"hackinbox-form__success"!=this.classList}).remove(),$(".hackinbox-counter, .hackinbox-content__title").remove()},error:function(){}})):t.addClass("hackinbox-form__userphone-error"))}),i=o.hackinbox_counter.deadline,s=60*+i.hours*60+60*+i.minutes+ +i.seconds,function(n,o){var c=document.querySelector(n),e=".hackinbox-counter-clock__number",t=c.querySelector("".concat(e,"-hours")),a=c.querySelector("".concat(e,"-minutes")),r=c.querySelector("".concat(e,"-seconds"));function i(){var n=function(n){var o=Date.parse(n)-Date.parse(new Date),c=Math.floor(o/1e3%60),e=Math.floor(o/1e3/60%60),t=Math.floor(o/36e5%24);return{total:o,hours:t,minutes:e,seconds:c}}(o);t.innerHTML=("0"+n.hours).slice(-2),a.innerHTML=("0"+n.minutes).slice(-2),r.innerHTML=("0"+n.seconds).slice(-2),n.total<=0&&clearInterval(s)}i();var s=setInterval(i,1e3)}(".hackinbox-counter-clock",new Date(Date.parse(new Date)+1e3*s)),function(){var n=document.querySelector(".hackinbox"),o=document.querySelector(".hackinbox-overlay");function e(){o.style.cssText="display:none !important",n.style.cssText="display:none !important",c()}document.querySelectorAll("[data-hackinbox=close]").forEach(function(n){return n.addEventListener("click",e)})}()},1e3*+o.display_delay)}).catch(function(n){throw n})}();