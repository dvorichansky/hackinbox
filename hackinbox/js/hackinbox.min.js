"use strict";function ownKeys(n,e){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);e&&(c=c.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),o.push.apply(o,c)}return o}function _objectSpread(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(o,!0).forEach(function(e){_defineProperty(n,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ownKeys(o).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,e){for(var o=0;o<e.length;o++){var c=e[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(n,c.key,c)}}function _createClass(n,e,o){return e&&_defineProperties(n.prototype,e),o&&_defineProperties(n,o),n}function _defineProperty(n,e,o){return e in n?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o,n}!function(){var n=function(){function n(){_classCallCheck(this,n),_defineProperty(this,"hackinbox",document.querySelector(".hackinbox")),_defineProperty(this,"hackinboxOverlay",document.querySelector(".hackinbox-overlay")),_defineProperty(this,"hackinboxClose",document.querySelectorAll("[data-hackinbox=close]")),_defineProperty(this,"modalElementAll",document.querySelectorAll(".modal"))}return _createClass(n,[{key:"hackinboxHide",value:function(){this.hackinboxOverlay.style.cssText="display:none !important",this.hackinbox.style.cssText="display:none !important",this.modalElementAllHide(!1),c()}},{key:"hackinboxShow",value:function(){this.hackinboxOverlay.style.cssText="display:block !important",this.hackinbox.style.cssText="display:block !important",this.modalElementAllHide(!0)}},{key:"hackinboxEventClose",value:function(){var n=this;this.hackinboxClose.forEach(function(e){return e.addEventListener("click",function(){return n.hackinboxHide()})})}},{key:"modalElementAllHide",value:function(n){this.modalElementAll.forEach(function(e){!0===n?e.classList.add("hackinbox-hide"):e.classList.remove("hackinbox-hide")})}}]),n}(),e="".concat(location.origin,"/hackinbox/"),o="".concat(e,"hackinbox_data.json");function c(){!function(n,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(o=_objectSpread({path:"/"},o)).expires&&(o.expires=o.expires.toUTCString());var c=encodeURIComponent(n)+"="+encodeURIComponent(e);for(var t in o){c+="; "+t;var a=o[t];!0!==a&&(c+="="+a)}document.cookie=c}("hackinbox","loaded",{"max-age":86400})}fetch(o).then(function(n){return function(n){if(200===n.status)return console.log("Successful connection!"),n.json();300===n.status&&console.log("Queue...")}(n)}).then(function(o){!function(o){if(function(n){if(n){var e=n.some(function(n){return n==location.hostname+location.pathname});return console.log(e?"Page excluded for hackinbox":"The page is allowed to display hackinbox"),e}}(o.exception_pages))return;if("OFF"==o.status)return c();(function(n){var o="uk"===document.getElementsByTagName("html")[0].lang?"uk":"ru",c=n.appearance,t=n.content,a=n.counter,r=n.form,i=a.deadline;document.body.insertAdjacentHTML("beforeend",'<div class="hackinbox">\n            <div class="hackinbox-container">\n                <div class="hackinbox-picture">\n                    <img class="hackinbox-picture__img" src="'.concat(e,"img/hackinbox_picture__").concat(o,'.png" />\n                </div>\n                <div class="hackinbox-content">                                  \n                    <a href="javascript:void(0)" class="hackinbox-close" data-hackinbox="close">Ã—</a>\n                    <div class="hackinbox-content__title">').concat(t.title[o],'</div>\n\n                    <div class="hackinbox-counter">\n                        <div class="hackinbox-counter__title">').concat(a.title[o],'</div>\n                        <div class="hackinbox-counter-clock">\n                            <div class="hackinbox-counter-clock__dig">\n                                <div class="hackinbox-counter-clock__number hackinbox-counter-clock__number-hours">00</div>\n                                <div class="hackinbox-counter-clock__name">').concat(i.hours_text[o],'</div>\n                            </div>\n                            <div class="hackinbox-counter-clock__dz"></div>\n                            <div class="hackinbox-counter-clock__dig">\n                                <div class="hackinbox-counter-clock__number hackinbox-counter-clock__number-minutes">23</div>\n                                <div class="hackinbox-counter-clock__name">').concat(i.minutes_text[o],'</div>\n                            </div>\n                            <div class="hackinbox-counter-clock__dz"></div>\n                            <div class="hackinbox-counter-clock__dig">\n                                <div class="hackinbox-counter-clock__number hackinbox-counter-clock__number-seconds">58</div>\n                                <div class="hackinbox-counter-clock__name">').concat(i.seconds_text[o],'</div>\n                            </div>\n                        </div>\n                    </div>\n                \n                    <form class="hackinbox-form" action="POST">\n                        <input type="hidden" name="form" value="').concat(r.name[o],'">\n                        <input type="hidden" name="referer" value="').concat(location.hostname+location.pathname,'">\n                        <input \n                          type="tel" \n                          name="phone" \n                          class="hackinbox-form__input hackinbox-form__userphone" \n                          value="').concat(r.mask,'"\n                          placeholder="').concat(r.placeholder,'" \n                          maxlength="34">\n                        <small class="hackinbox-form__message-error">').concat(r.userphone_message_error[o],'</small>\n                        <button \n                          type="submit" \n                          class="hackinbox-form__button"\n                        >').concat(r.button[o],'</button>  \n                        <div class="hackinbox-form__success">\n                            <div class="hackinbox-form__success-text">').concat(r.success_text[o],'</div>\n                            <button \n                              type="button" \n                              class="hackinbox-form__button hackinbox-form__success-button" \n                              data-hackinbox="close">').concat(r.success_button[o],'</button>\n                        </div>                      \n                    </form>                    \n                </div>\n            </div>\n        </div>\n        <div class="hackinbox-overlay" data-hackinbox="close"></div>\n        <style id="hackinbox_style">\n          ').concat(c.box_shadow?".hackinbox{box-shadow:".concat(c.box_shadow,"}"):"","\n          ").concat(t.background_color?".hackinbox-content{background-color:#".concat(t.background_color,"}"):"","\n          ").concat(t.title_color?".hackinbox-content__title{color:#".concat(t.title_color,"}"):"","\n          ").concat(c.overlay?".hackinbox-overlay{background-color:#".concat(c.overlay.background_color,";opacity:").concat(c.overlay.opacity,"}"):"","\n          ").concat(r.button_color?".hackinbox-form__button{background-color:#".concat(r.button_color,";}"):"","\n          ").concat(r.success_button_color?".hackinbox-form__success-button{background-color:#".concat(r.success_button_color,";}"):"","\n          ").concat(a.color||a.background_color?".hackinbox-counter-clock__number,.hackinbox-counter-clock__dz:before,.hackinbox-counter-clock__dz:after{background-color:#".concat(a.background_color,";color:#").concat(a.color,";}"):"","\n        </style>"))})(o),r=o.form.configuration_file,i=$(".hackinbox-form [name=phone]"),s=$(".hackinbox-form [type=submit]"),l=document.querySelector(".hackinbox-form [name=phone]"),function(n){n.addEventListener("input",function(){var n=this.defaultValue,e=0,o=n.replace(/\D/g,""),c=this.value.replace(/\D/g,"");o.length>=c.length&&(c=o),n=n.replace(/[_\d]/g,function(n){return c.charAt(e++)||"_"}),this.value=n,(e=n.lastIndexOf(c.substr(-1)))<n.length&&n!=this.defaultValue?e++:e=n.indexOf("_"),function(n,e){if(e.focus(),e.setSelectionRange)e.setSelectionRange(n,n);else if(e.createTextRange){var o=e.createTextRange();o.collapse(!0),o.moveEnd("character",n),o.moveStart("character",n),o.select()}}(e,this)},!1)}(l),document.addEventListener("submit",function(n){var e=n.target;e.classList.contains("hackinbox-form")&&(n.preventDefault(),-1===l.value.indexOf("_")?(i.removeClass("hackinbox-form__userphone-error"),s.prop("disabled",!0),$.ajax({type:"POST",url:r,data:$(e).serialize(),dataType:"html",beforeSend:function(){},success:function(n){$(e).contents().filter(function(){return"hackinbox-form__success"!=this.classList}).remove(),$(".hackinbox-counter, .hackinbox-content__title").remove(),c()},error:function(){}})):i.addClass("hackinbox-form__userphone-error"))}),t=o.counter.deadline,a=60*+t.hours*60+60*+t.minutes+ +t.seconds,function(n,e){var o=document.querySelector(n),c=".hackinbox-counter-clock__number",t=o.querySelector("".concat(c,"-hours")),a=o.querySelector("".concat(c,"-minutes")),r=o.querySelector("".concat(c,"-seconds"));function i(){var n=function(n){var e=Date.parse(n)-Date.parse(new Date),o=Math.floor(e/1e3%60),c=Math.floor(e/1e3/60%60),t=Math.floor(e/36e5%24);return{total:e,hours:t,minutes:c,seconds:o}}(e);t.innerHTML=("0"+n.hours).slice(-2),a.innerHTML=("0"+n.minutes).slice(-2),r.innerHTML=("0"+n.seconds).slice(-2),n.total<=0&&clearInterval(s)}i();var s=setInterval(i,1e3)}(".hackinbox-counter-clock",new Date(Date.parse(new Date)+1e3*a)),setTimeout(function(){var e=new n;e.hackinboxShow(),e.hackinboxEventClose()},1e3*+o.display_delay);var t,a;var r,i,s,l}(o)}).catch(function(n){throw n})}();